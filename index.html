<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Haven Studio Apartment Comparator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: A single-page dashboard application designed for direct comparison. The structure prioritizes user tasks over mirroring the linear report. It features three main interactive sections: 1) An "Overview & Comparison" dashboard with a dynamic chart and filter controls to visually compare properties by key metrics (value, quiet, management). 2) A "Deep Dive Profiles" section with detailed cards for each property, accessible via smooth-scrolling from the overview. 3) A "Comparative Insights" section presenting detailed textual analysis and tables. 4) A "Key Takeaways" section summarizing the report's recommendations. This comprehensive structure was chosen because the primary user goal is to weigh trade-offs between properties, which is best facilitated by interactive, side-by-side visualization and detailed textual support rather than linear reading. -->
    <!-- Visualization & Content Choices:
        - Price/Value Comparison: Goal: Compare affordability. Method: Interactive Bar Chart (Chart.js) showing the lowest studio price. Interaction: The chart updates when the user selects a priority from a dropdown filter. Justification: A bar chart provides the clearest visual representation of relative costs. The filter makes the comparison task-oriented.
        - Resident Experience (Noise/Management): Goal: Quantify and compare qualitative feedback. Method: A 1-5 scoring system derived from the report's text is created and used to power the bar chart. Interaction: The chart dynamically displays these scores when the user filters by "Quietest" or "Best Management". Justification: Quantifying subjective data is essential for direct comparison in a chart format.
        - Amenities: Goal: Inform and compare features. Method: An amenity score (count of key features) for the main chart and Unicode icons (e.g., ðŸŠ, ðŸ’ª) within the detail cards. Justification: The score allows for high-level comparison, while icons provide quick, scannable, and visually appealing details.
        - Textual Content: Goal: Provide deep context on demand. Method: Organized into structured "Deep Dive" cards with clear headings and bullet points for pros/cons, and new sections for "Overview", "Floor Plans/Pricing", and "Overall Living". The "Comparative Insights" section uses collapsible details for in-depth analysis. Justification: This keeps the main dashboard uncluttered while making comprehensive information easily accessible via scrolling and interactive expansion.
        - Tables: Goal: Provide structured data comparison. Method: HTML tables for "Studio Apartment Comparison" and "Resident Experience Snapshot". Justification: Tables are the most effective way to present structured, comparative data clearly.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f7f4; /* Warm neutral background */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 450px;
            }
        }
        .nav-link {
            transition: all 0.2s ease-in-out;
        }
        .nav-link.active {
            color: #0d9488; /* Teal-600 */
            border-bottom-color: #0d9488;
        }
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details > summary::after {
            content: '+';
            float: right;
            transition: transform 0.2s ease;
        }
        details[open] > summary::after {
            content: '-';
            transform: rotate(90deg);
        }
    </style>
</head>
<body class="text-gray-800 antialiased">

    <div id="app" class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Downtown New Haven Studio Finder</h1>
            <p class="mt-2 text-lg text-gray-600">An interactive guide to luxury apartments with pools around $2200.</p>
        </header>

        <nav class="sticky top-0 bg-f8f7f4/80 backdrop-blur-sm z-10 mb-8 py-2 border-b border-gray-200">
            <ul class="flex justify-center items-center space-x-4 md:space-x-8">
                <li><a href="#comparison-section" class="nav-link active font-semibold text-gray-500 hover:text-teal-600 border-b-2 border-transparent pb-2">Comparison</a></li>
                <li><a href="#profiles-section" class="nav-link font-semibold text-gray-500 hover:text-teal-600 border-b-2 border-transparent pb-2">Profiles</a></li>
                <li><a href="#comparative-insights-section" class="nav-link font-semibold text-gray-500 hover:text-teal-600 border-b-2 border-transparent pb-2">Insights</a></li>
                <li><a href="#recommendations-section" class="nav-link font-semibold text-gray-500 hover:text-teal-600 border-b-2 border-transparent pb-2">Recommendations</a></li>
            </ul>
        </nav>

        <main>
            <section id="comparison-section" class="mb-16">
                <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
                    <h2 class="text-2xl font-bold text-center mb-2">Property Comparison</h2>
                    <p class="text-center text-gray-600 mb-6">Select a priority to see how the top contenders stack up. Click a property's name on the chart to jump to its detailed profile.</p>
                    <div class="flex justify-center items-center mb-6">
                        <label for="priority-filter" class="mr-3 font-semibold text-gray-700">Prioritize by:</label>
                        <select id="priority-filter" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-teal-500 focus:border-teal-500 block p-2.5">
                            <option value="overall" selected>Overall Score</option>
                            <option value="value">Best Value (Price)</option>
                            <option value="quiet">Quietest Environment</option>
                            <option value="management">Best Management</option>
                            <option value="amenities">Most Amenities</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="property-chart"></canvas>
                    </div>
                </div>
            </section>

            <section id="profiles-section" class="mb-16">
                <h2 class="text-2xl font-bold text-center mb-2">Deep Dive Profiles</h2>
                 <p class="text-center text-gray-600 mb-8">Explore detailed information on each property, including amenities, pricing, and a comprehensive summary of resident experiences.</p>
                <div id="property-profiles-container" class="space-y-8">
                </div>
            </section>

            <section id="comparative-insights-section" class="mb-16">
                <h2 class="text-2xl font-bold text-center mb-2">Comparative Insights</h2>
                <p class="text-center text-gray-600 mb-8">Delve deeper into the nuances of each property, comparing them across key aspects of urban living.</p>

                <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 mb-8">
                    <h3 class="text-xl font-semibold border-b pb-2 mb-4">Studio Apartment Comparison (Pricing, Amenities, Availability)</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Property Name</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Studio Price Range (Base Rent)</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Current Specials</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pool (Type)</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Key Common Spaces</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Key Outdoor Spaces</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Earliest Studio Availability</th>
                                </tr>
                            </thead>
                            <tbody id="comparison-table-body" class="bg-white divide-y divide-gray-200">
                                <!-- Table rows will be populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 mb-8">
                    <h3 class="text-xl font-semibold border-b pb-2 mb-4">Resident Experience Snapshot (Management, Noise, Overall Satisfaction)</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Property Name</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Management Reputation</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Noise Levels</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Overall Living Experience</th>
                                    <th scope="col" class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pet Friendliness/Issues</th>
                                </tr>
                            </thead>
                            <tbody id="resident-experience-table-body" class="bg-white divide-y divide-gray-200">
                                <!-- Table rows will be populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 space-y-4">
                    <h3 class="text-xl font-semibold border-b pb-2 mb-4">Comparative Insights: Value, Lifestyle, and Trade-offs</h3>

                    <details class="group">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer py-2 text-teal-700">
                            Pricing vs. True Value
                        </summary>
                        <div class="px-4 pb-2 text-gray-700">
                            <p class="text-sm">The advertised "starting at" prices for studio apartments can be misleading without considering current promotional offers. For instance, The Anthem at Square 10 offers studios starting as low as $1,795 and includes "up to two months free" on select units. This can significantly reduce the effective monthly rent over a 12-month lease, potentially making it the most financially attractive option while still providing extensive amenities. In contrast, properties like The Audubon, with studios starting around $2,269-$2,490, and Corsair at $2,337+, might appear to fit the budget less directly. The true value proposition of each property is not solely determined by the base rent but by how well that price aligns with the quality, accessibility, and consistency of the amenities and services provided.</p>
                        </div>
                    </details>

                    <details class="group">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer py-2 text-teal-700">
                            Noise Tolerance: An Inherent Downtown Reality
                        </summary>
                        <div class="px-4 pb-2 text-gray-700">
                            <p class="text-sm">A recurring theme across the downtown New Haven properties is the pervasive issue of noise. This is an inherent characteristic of urban living and a critical factor for prospective residents. Sources of noise include street traffic, sirens, nightlife, and train horns. Properties like 360 State Street and The Whit are frequently cited for significant external noise, with complaints about loud music, motorcycles, and thin walls transmitting sound. The Audubon also faces substantial internal noise issues due to a reported "party central" atmosphere and unenforced noise policies. This suggests that a certain level of urban noise is an unavoidable trade-off for a prime downtown location. While some properties may have better sound insulation or quieter orientations (e.g., higher floors, non-street facing units), renters seeking absolute quiet may find downtown living challenging. The absence of negative noise comments for The Anthem at Square 10 in the provided reviews stands out as a potential differentiator, possibly due to newer construction or its specific location within the Square 10 development.</p>
                        </div>
                    </details>

                    <details class="group">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer py-2 text-teal-700">
                            The Critical Impact of Management Quality
                        </summary>
                        <div class="px-4 pb-2 text-gray-700">
                            <p class="text-sm">The quality and responsiveness of property management significantly influence the overall living experience, often more so than the initial appeal of the building. This includes aspects like maintenance efficiency, communication, and, crucially, the enforcement of community rules. At 360 State Street, a change in management to South Oxford has been directly linked to a "slow degradation in amenities and building upkeep," poor communication regarding critical issues, and a perceived prioritization of profit over resident well-being. Similarly, at The Whit and The Audubon, inconsistent rule enforcement, particularly concerning pet behavior and noise, has led to a diminished quality of life for residents, despite otherwise positive aspects of the property. When management fails to uphold community standards, even well-appointed buildings can suffer from a "glorified dorm" atmosphere or safety concerns, as reported at The Audubon with garage break-ins. Conversely, The Anthem at Square 10 consistently receives praise for its attentive and helpful staff, contributing to a smooth living experience. This underscores that effective management is pivotal in maintaining the "luxury" promise beyond initial impressions.</p>
                        </div>
                    </details>

                    <details class="group">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer py-2 text-teal-700">
                            Community Vibe and Resident Demographics
                        </summary>
                        <div class="px-4 pb-2 text-gray-700">
                            <p class="text-sm">The reported community atmospheres vary significantly. 360 State Street is described as a "nice quiet community" with friendly people and a good mix of social events, catering to young professionals in healthcare or corporate roles. The Whit benefits from a policy that generally excludes undergraduates, contributing to a perceived better atmosphere. In contrast, The Audubon has seen a "shift in clientele" towards a "party central" environment, with many residents describing it as a "glorified dorm" due to loud and inconsiderate neighbors. This highlights how resident demographics and management's role in fostering a community ethos can profoundly shape the living environment. For a discerning professional, a property's community vibe can be as important as its physical amenities.</p>
                        </div>
                    </details>

                    <details class="group">
                        <summary class="flex justify-between items-center font-semibold cursor-pointer py-2 text-teal-700">
                            Navigating Trade-offs in Luxury Urban Living
                        </summary>
                        <div class="px-4 pb-2 text-gray-700">
                            <p class="text-sm">Selecting a luxury studio in Downtown New Haven involves inherent compromises. Renters must weigh the convenience and vibrancy of a central location against the unavoidable presence of urban noise. The depth of advertised amenities should be balanced with the reality of their consistent availability and maintenance. Pricing, while a primary filter, must be considered in terms of effective rent and the overall value delivered by the property. Ultimately, the quality of property management and its impact on daily living, including rule enforcement and responsiveness, often emerges as a critical determinant of long-term satisfaction. The decision hinges on an individual's priorities and tolerance for these various factors.</p>
                        </div>
                    </details>
                </div>
            </section>

            <section id="recommendations-section">
                <h2 class="text-2xl font-bold text-center mb-2">Recommendations & Key Considerations</h2>
                 <p class="text-center text-gray-600 mb-8">Based on the analysis, here are tailored recommendations and essential next steps for your apartment search.</p>
                <div class="grid md:grid-cols-2 gap-8">
                    <div id="tailored-recommendations" class="bg-white p-6 rounded-xl shadow-md border border-gray-100 space-y-4">
                        <h3 class="text-xl font-semibold border-b pb-2">Tailored Recommendations</h3>
                    </div>
                    <div id="due-diligence" class="bg-white p-6 rounded-xl shadow-md border border-gray-100 space-y-4">
                         <h3 class="text-xl font-semibold border-b pb-2">Essential Due Diligence</h3>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const propertyData = [
                {
                    id: 'anthem',
                    name: 'The Anthem at Square 10',
                    overview: 'The Anthem at Square 10 is a newly developed, sustainably designed luxury apartment community in downtown New Haven, representing the initial phase of the larger "Square 10" development. It emphasizes ultra-modern amenities and a vibrant public plaza, aiming to create a new urban living experience where legends once performed.',
                    floorPlansPricing: {
                        range: '$1,795 - $2,335',
                        sqFt: 'Varies (S1, S2, S3, S4, S5)',
                        special: 'Up to two months free on select apartment homes for summer move-ins. Contact leasing office to confirm for studios.',
                        availability: 'Currently Available'
                    },
                    amenities: ['Oasis Pool', 'Health Club', 'Great Hall (Gaming/Co-working)', 'Private Club/Sound Stage', 'Rooftop Deck', 'Indoor/Outdoor Yoga', 'Office Center/Conference Room', 'Club House', 'Public Plaza', 'BBQ/Picnic Areas', 'Proximity to Wooster Square Park'],
                    scores: { value: 5, quiet: 5, management: 5, amenities: 5, overall: 5 },
                    pros: [
                        'Overwhelmingly positive feedback on management (helpful, patient, courteous, attentive).',
                        'No negative noise complaints in resident reviews, a significant differentiator downtown.',
                        'Striking, ultra-modern, and top-tier amenities (some of the best in the area).',
                        'Highly competitive pricing, often below budget, with valuable "months free" specials.',
                        'Excellent walkable location near the train station, Wooster Square, and dining options.',
                        'Very beautiful and incredible building with top-notch finishes and appliances.',
                        'Pet-friendly community.'
                    ],
                    cons: [
                        'Specials may not apply to all studio units; direct confirmation needed.',
                        'As a new development, surrounding construction may occur.',
                        'Specific details on studio square footage not always explicit in general listings.'
                    ],
                    overallLiving: 'Residents express high satisfaction, describing their living experience as "full contentment" and a "dream manifested." The location is highly valued for its walkability. As part of a new and innovative neighborhood development, it suggests a modern and evolving urban environment. The combination of attractive pricing, strong promotional offers, and consistently positive resident feedback (especially the absence of common downtown complaints like noise and poor management) suggests that The Anthem at Square 10 offers a superior value proposition and potentially a higher quality of life for the user.'
                },
                {
                    id: '360state',
                    name: '360 State Street',
                    overview: '360 State Street stands as a prominent high-rise luxury apartment building in the heart of downtown New Haven. It is distinguished by its modern architectural design, featuring expansive floor-to-ceiling windows and premium in-unit amenities such as stainless-steel appliances and in-unit washers and dryers. The property aims to provide a sophisticated urban living experience.',
                    floorPlansPricing: {
                        range: '$2,304+',
                        sqFt: 'Varies (studio units available, 1-bedrooms from $2,279)',
                        special: 'Up to 2-Months Free Rent On Selected Apartment Homes. Verify if applicable to studios.',
                        availability: 'Varies, contact property'
                    },
                    amenities: ['Heated Rooftop Pool', 'Private Cabanas', 'Grilling Stations', 'Golf Simulator', 'Game Room', '24/7 Concierge', 'Coworking Spaces', 'Fully Equipped Fitness Center', 'Spacious Club Room with Catering Kitchen', 'Serene Green Space', 'EV Charging Stations', 'Ample Onsite Private Parking (additional cost)', 'In-unit Washer/Dryer', 'Modern Finishes (floor-to-ceiling windows, stainless-steel appliances)'],
                    scores: { value: 3, quiet: 2, management: 2, amenities: 5, overall: 3 },
                    pros: [
                        'Unique heated rooftop pool with private cabanas.',
                        'Prime, central downtown location, highly walkable to Yale, restaurants, and attractions.',
                        'Maintenance team is consistently praised for being "friendly and fast working" and timely.',
                        'Good mix of social events and friendly community.',
                        'Modern finishes (floor-to-ceiling windows, stainless-steel appliances), in-unit washer/dryer.',
                        'Pet-friendly.'
                    ],
                    cons: [
                        'Significant noise from street (entertainment facilities, loud music, motorcycles), frequent sirens and train horns.',
                        '"Paper thin walls" and building structure transmit internal noise (e.g., from gym).',
                        'New management (South Oxford) criticized for "slow degradation in amenities and building upkeep".',
                        'Malfunctioning gym equipment (treadmills, rowing machines, stationary bikes) needing better maintenance.',
                        'Prolonged closure of ground-floor grocery store (replacement tenant "months overdue").',
                        'Leasing office described as "confused at best and obstructive at worst" with poor communication (mishandled rent payments, fire alarms).',
                        'Parking garage made public, leading to safety concerns and reported theft.',
                        'Rent considered "very overpriced" for current quality; common spaces locked after 10 pm.'
                    ],
                    overallLiving: 'The prime downtown location is a major advantage, offering quick access to restaurants, shopping, and the train station. The community is generally described as "nice" and "friendly," with a good mix of social events. However, despite the luxurious feel, some residents find the rent "very overpriced" given the perceived decline in amenity quality and the fact that common spaces like the club room are locked after 10 pm, limiting evening social use.'
                },
                {
                    id: 'whit',
                    name: 'The Whit',
                    overview: 'The Whit is strategically located at the gateway to the historic Wooster Square, offering modern luxury apartments and two-story lofts. The property is designed to blend contemporary aesthetics with the neighborhood\'s historic charm, providing elegant features and a comprehensive suite of amenities.',
                    floorPlansPricing: {
                        range: '~$2,400+',
                        sqFt: 'Studio apartment homes available',
                        special: 'UP TO TWO MONTHS FREE on select apartment homes. Direct contact recommended for precise studio pricing and availability.',
                        availability: 'Varies, contact property'
                    },
                    amenities: ['Resort-Style Pool (2nd-floor landscaped courtyard)', 'Fitness Center with Yoga Studio', 'Spacious Club Room with Catering Kitchen', 'Game Room (ping pong, shuffleboard)', 'Business Lounge with Co-working Spaces', 'Reservable Individual Offices', 'Rooftop Terrace (bar, lounge, BBQ grills, fire pits)', 'Concierge and Package Acceptance', 'On-site Restaurants (ROLi and La Fenice)', 'Indoor Bike Storage', 'Guest Suites', 'Modern Finishes (quartz countertops, stainless appliances)', 'In-unit Laundry'],
                    scores: { value: 2, quiet: 2, management: 3, amenities: 4, overall: 2.8 },
                    pros: [
                        'Amenities are generally praised as "top-notch" and consistently "clean".',
                        'Apartments feature "sleek with high-end finishes" and abundant natural light.',
                        'Great location near Yale and Wooster Square, "steps from Yale, shops, and restaurants".',
                        'Policy of not allowing undergraduates is viewed positively by some, contributing to a perceived better atmosphere.',
                        'Staff can be "responsive and thoughtful," "incredible," "communicative and helpful," facilitating "seamless" transitions.'
                    ],
                    cons: [
                        'Major concerns with loud downtown noise (dirt bikes, Harleys, loud stereos, drag racing, train sounds).',
                        'Inconsistent enforcement of pet rules (barking dogs, pet waste in elevators, dogs in prohibited areas like pool deck).',
                        'Management staff can be perceived as "unreliable, inconsistent, and often seems as if they do not care".',
                        'Gym is noted as "small and frequently crowded at peak times".',
                        'Pool deck is often "super windy," making outdoor dining challenging.',
                        'EV chargers reported problematic for non-Tesla vehicles.',
                        '"Tiny" in-unit washer/dryers, old or smelly dishwashers, refrigerators that consistently freeze food.',
                        'Parking difficulties for visitors and slow elevators in a 32-floor building.'
                    ],
                    overallLiving: 'The Whit is generally perceived as offering a "modern, convenient lifestyle" and a "great home" due to its highly desirable location. Practical drawbacks include parking difficulties for visitors and slow elevators. Some residents describe the building as a "fairly generic, fairly unimpressive developer building with no personality rented at very high prices".'
                },
                {
                    id: 'audubon',
                    name: 'The Audubon New Haven',
                    overview: 'The Audubon is strategically positioned at the gateway to New Haven\'s cultural and culinary scene, offering luxury rentals across its three buildings. The property emphasizes thoughtful design, aiming to facilitate a seamless integration of work and life for its residents.',
                    floorPlansPricing: {
                        range: '$2,269 - $2,490+',
                        sqFt: 'Studio (S1) floor plans, typically around 540 Sq. Ft.',
                        special: 'None explicitly mentioned.',
                        availability: 'August 4, 2025 (S1)'
                    },
                    amenities: ['Pool Deck', 'Multiple Fitness Centers (cross-fit areas, punching bags, dance room)', 'Golf Simulator', 'Game Room with Bar Area', 'Sound Lounge Music Studio', 'Zoom-friendly Quiet Work Rooms', 'Various Lounge Areas', 'Private Working Spaces for Larger Groups', 'Dinner Party Room with Demonstration Kitchen', 'Co-working Spaces', 'Private Outdoor Areas (some units)', 'Rooftop Lounge with Resident Gardens', 'Rooftop Grill and Cabana', 'Urban Green Space', 'Bonfire Pit'],
                    scores: { value: 3, quiet: 1, management: 1, amenities: 5, overall: 2.5 },
                    pros: [
                        'Extensive and "amazing" array of amenities, considered among the "best amenities" compared to similar properties.',
                        'Modern units with "top notch" in-unit appliances.',
                        'Highly walkable location in the arts district, convenient to downtown attractions.',
                        'Building architecture and landscaping are well-regarded.',
                        'Some residents find staff "super nice" and "wonderful".'
                    ],
                    cons: [
                        'Major noise issues; "loud and soooo inconsiderate" neighbors who treat the building like a "frat house".',
                        'Noise rules (after 10 pm) reportedly not enforced by management.',
                        'Noticeable "shift in clientele" towards a "party central" atmosphere.',
                        'Management is highly polarized: often seen as "incompetent," "so bad," "overpromise and underdeliver," and "only care about money".',
                        'Failure to enforce noise rules and lack of transparency regarding car break-ins in the garage.',
                        'Pool reported out of service for extended periods or inaccessible during holidays due to shared access.',
                        'Internet connectivity issues in common areas, particularly work-from-home spaces.'
                    ],
                    overallLiving: 'The living experience is highly mixed. Some residents describe it as a "glorified dorm" and a "nightmare" due to unaddressed resident behavior and management issues. Safety concerns are raised due to reported car break-ins and thefts in the garage. Conversely, others find it a "great home" with "wonderful space" and appreciate the building\'s architecture and landscaping. Despite the advertised luxury, some residents perceive it as "overpriced for the quality" of the actual living experience.'
                },
                {
                    id: 'corsair',
                    name: 'Corsair Apartments',
                    overview: 'Corsair Apartments, located on upper State Street in the East Rock neighborhood, offers modern comfort within a historic, refurbished industrial building. It preserves original materials like pine beams and steel trusses, providing a unique aesthetic. The East Rock location offers easy access to local hangouts and park spaces.',
                    floorPlansPricing: {
                        range: '$2,337+',
                        sqFt: 'Studio floor plans available',
                        special: 'None explicitly mentioned.',
                        availability: 'Varies, contact property'
                    },
                    amenities: ['Heated Courtyard Pool', 'Fully Equipped Fitness Center with Peloton Cycle equipment', 'Game Room', 'Library', 'Movie Room', 'Business Center', 'Package Concierge Service', 'Decked-out Cabanas', 'Bocce Court', 'Fire Pit', 'Grilling Stations', 'Pizza Oven', 'Lawnside Movie Theater', 'Roof Deck'],
                    scores: { value: 2, quiet: 3, management: 4, amenities: 4, overall: 3.3 },
                    pros: [
                        'Amenities are generally highly praised as "amazing" and "excellent," including the gym, pool, and rooftop.',
                        'Gym is specifically noted as "very nice, clean, and well-stocked".',
                        'Management receives high praise from many (professionalism, attentiveness).',
                        'Maintenance staff is consistently described as "prompt," "incredible," and "professional".',
                        'Many residents describe a positive living experience, feeling "at home".',
                        'Appreciated "old fashioned neighborhood" feel of East Rock.',
                        'Location valued for proximity to restaurants and parks, offering urban access without being directly in the city center.',
                        'Community is dog-friendly.'
                    ],
                    cons: [
                        'Some residents report that "many of the amenities they show you on the tour won\'t consistently be available".',
                        'Issues with landscaping and malfunctioning gym televisions noted.',
                        'Some reviews indicate communication breakdowns with management (ceasing communication on complex issues, closing shared amenities for private events).',
                        'Mixed noise feedback: official rating 5/5, but others report "significant traffic noise from highway 91" that is "24/7" and disruptive.',
                        'Frequent fire alarms are a complaint.',
                        'Difficulties with street parking due to nearby attractions.',
                        'Concerns about the local homeless population near the State Street bridge.',
                        'Some found it "more like a dorm than a luxury experience" and expressed concerns about safety in the broader New Haven area.',
                        'Utility costs noted as high.'
                    ],
                    overallLiving: 'Many residents describe a positive living experience, feeling "at home" and praising the "old fashioned neighborhood" feel of East Rock. The location is valued for its proximity to restaurants and parks, offering a balance of urban access without being directly in the city center. Negative aspects include difficulties with street parking and concerns about the local homeless population. Some found it "more like a dorm than a luxury experience" and expressed concerns about safety in the broader New Haven area. Utility costs were also noted as high.'
                }
            ];

            const recommendationsData = {
                tailored: [
                    {
                        title: 'For Budget-Conscious Luxury Seekers:',
                        text: '<strong>The Anthem at Square 10</strong> offers the most competitive rents and valuable "months free" specials, providing premium amenities at the best value.'
                    },
                    {
                        title: 'For Those Prioritizing Quiet:',
                        text: 'While no downtown location is silent, <strong>The Anthem at Square 10</strong> is the standout, with no negative noise complaints in resident reviews, a major differentiator.'
                    },
                    {
                        title: 'For Amenity Enthusiasts:',
                        text: '<strong>The Audubon</strong> and <strong>360 State Street</strong> offer the most extensive lists of amenities, including unique features like sound lounges and a rooftop pool. <strong>Corsair</strong> also provides a wide array of recreational outdoor amenities.'
                    },
                    {
                        title: 'For Strong Management Preference:',
                        text: '<strong>The Anthem at Square 10</strong> receives consistently and overwhelmingly positive feedback for its helpful and attentive staff, suggesting a smoother living experience.'
                    }
                ],
                diligence: [
                    {
                        title: 'Verify Effective Rent',
                        text: 'Contact leasing offices to confirm specials and calculate your true monthly cost over the lease term.'
                    },
                    {
                        title: 'Conduct Multiple In-Person Tours',
                        text: 'Visit at different times (day, night, weekend) to assess real-world noise levels and community vibe.'
                    },
                    {
                        title: 'Engage with Current Residents',
                        text: 'If possible, ask residents about their experiences with management, noise, and amenity upkeep.'
                    },
                    {
                        title: 'Inquire About Rule Enforcement',
                        text: 'Ask management directly how they handle noise complaints and enforce community rules to gauge their effectiveness.'
                    },
                    {
                        title: 'Consider Long-Term Outlook',
                        text: 'Reflect on potential future changes that could impact the living experience over time, including possible shifts in management, planned construction, or evolving resident demographics.'
                    }
                ]
            };

            const comparativeTablesData = {
                studioComparison: [
                    {
                        propertyName: '360 State Street',
                        priceRange: '$2,304+',
                        specials: 'Up to 2-Months Free (select units)',
                        poolType: 'Rooftop (Heated)',
                        commonSpaces: 'Fitness, Co-working, Game Room, Golf Sim, Concierge',
                        outdoorSpaces: 'Rooftop Deck, Cabanas, Grilling Stations, Green Space',
                        availability: 'Varies, contact property'
                    },
                    {
                        propertyName: 'The Whit',
                        priceRange: '~$2,400+',
                        specials: 'Up to 2-Months Free (select units)',
                        poolType: 'Courtyard',
                        commonSpaces: 'Fitness/Yoga, Club Room, Game Room, Co-working, Concierge',
                        outdoorSpaces: 'Rooftop Terrace (Bar, BBQ, Fire Pits), Courtyard, Dog Park (nearby)',
                        availability: 'Varies, contact property'
                    },
                    {
                        propertyName: 'The Audubon',
                        priceRange: '$2,269 - $2,490+',
                        specials: 'None explicitly stated',
                        poolType: 'Pool Deck',
                        commonSpaces: 'Multiple Fitness Centers, Golf Sim, Game Room, Sound Lounge, Co-working',
                        outdoorSpaces: 'Rooftop Lounge/Gardens, Grill/Cabana, Urban Green Space, Bonfire Pit',
                        availability: 'August 4, 2025 (S1)'
                    },
                    {
                        propertyName: 'The Anthem at Square 10',
                        priceRange: '$1,795 - $2,335',
                        specials: 'Up to 2-Months Free (select units)',
                        poolType: 'Outdoor Oasis',
                        commonSpaces: 'Health Club, Great Hall (Gaming, Co-working), Private Club/Sound Stage, Cafe',
                        outdoorSpaces: 'Courtyard, Public Plaza, Roof Deck, Indoor/Outdoor Yoga, BBQ/Picnic',
                        availability: 'Currently Available'
                    },
                    {
                        propertyName: 'Corsair Apartments',
                        priceRange: '$2,337+',
                        specials: 'None explicitly stated',
                        poolType: 'Heated Courtyard Pool',
                        commonSpaces: 'Fitness Center (Peloton), Game Room, Library, Movie Room, Business Center, Package Concierge',
                        outdoorSpaces: 'Cabanas, Bocce Court, Fire Pit, Grilling Stations, Pizza Oven, Lawnside Movie Theater, Roof Deck',
                        availability: 'Varies, contact property'
                    }
                ],
                residentExperience: [
                    {
                        propertyName: '360 State Street',
                        management: 'Mixed; Maintenance praised, leasing office confused/obstructive. New management (South Oxford) criticized for degradation, poor communication, safety issues.',
                        noise: 'Significant concern; Street, train, thin walls. Loud music, sirens, train horns common.',
                        overallLiving: 'Prime location, nice community, but overpriced. Amenities degrading, common spaces limited hours.',
                        petIssues: 'Pet-friendly.'
                    },
                    {
                        propertyName: 'The Whit',
                        management: 'Mixed; Staff responsive/helpful, but inconsistent rule enforcement (pets). Some find management uncaring.',
                        noise: 'Major concern; LOUD downtown noise (bikes, stereos, drag racing), frequent train sounds. Unit-to-unit quiet.',
                        overallLiving: 'Modern, convenient, great location (near Yale). Drawbacks: parking, slow elevators. Can feel generic.',
                        petIssues: 'Pet-friendly, but poor rule enforcement (barking, pee, pool deck).'
                    },
                    {
                        propertyName: 'The Audubon',
                        management: 'Highly polarized; Praised as "super nice" by some, but others find them incompetent, unconcerned, not enforcing rules (noise, safety).',
                        noise: 'Major concern; Loud, inconsiderate neighbors ("frat house" vibe). Rules not enforced.',
                        overallLiving: 'Mixed; "Glorified dorm" or "nightmare" due to noise/management. Safety concerns (garage break-ins). Good location.',
                        petIssues: 'Pet-friendly.'
                    },
                    {
                        propertyName: 'The Anthem at Square 10',
                        management: 'Overwhelmingly positive; Staff helpful, patient, courteous, attentive.',
                        noise: 'No negative comments reported.',
                        overallLiving: 'Highly positive; "Full contentment," "dream manifested." Modern, walkable location, pet-friendly.',
                        petIssues: 'Pet-friendly.'
                    },
                    {
                        propertyName: 'Corsair Apartments',
                        management: 'Mixed; Many praise management and maintenance. Some report communication breakdowns, closing shared amenities for private events.',
                        noise: 'Mixed; Official rating 5/5, but others report "significant traffic noise from highway 91" that is "24/7" and disruptive. Frequent fire alarms.',
                        overallLiving: 'Positive; "At home," "old fashioned neighborhood" feel. Drawbacks: street parking, homeless population nearby, high utility costs, can feel like a dorm.',
                        petIssues: 'Dog-friendly.'
                    }
                ]
            };


            const ctx = document.getElementById('property-chart').getContext('2d');
            let propertyChart;

            const updateChart = (metric) => {
                propertyData.sort((a, b) => {
                    if (metric === 'value') {
                        return a.floorPlansPricing.range.split('-')[0].replace(/[^0-9.]/g, '') - b.floorPlansPricing.range.split('-')[0].replace(/[^0-9.]/g, '');
                    }
                    return b.scores[metric] - a.scores[metric];
                });

                const labels = propertyData.map(p => p.name);
                const data = propertyData.map(p => metric === 'value' ? p.floorPlansPricing.range.split('-')[0].replace(/[^0-9.]/g, '') : p.scores[metric]);

                let labelText = '';
                let backgroundColor = 'rgba(13, 148, 136, 0.6)'; /* Teal-600 */
                let borderColor = 'rgba(13, 148, 136, 1)';
                let hoverBackgroundColor = 'rgba(15, 118, 110, 1)'; /* Teal-700 */

                switch(metric) {
                    case 'value':
                        labelText = 'Starting Studio Price ($)';
                        backgroundColor = 'rgba(59, 130, 246, 0.6)'; // Blue
                        borderColor = 'rgba(59, 130, 246, 1)';
                        hoverBackgroundColor = 'rgba(37, 99, 235, 1)';
                        break;
                    case 'quiet':
                        labelText = 'Quiet Score (out of 5)';
                        backgroundColor = 'rgba(168, 85, 247, 0.6)'; // Purple
                        borderColor = 'rgba(168, 85, 247, 1)';
                        hoverBackgroundColor = 'rgba(147, 51, 234, 1)';
                        break;
                    case 'management':
                        labelText = 'Management Score (out of 5)';
                        backgroundColor = 'rgba(234, 179, 8, 0.6)'; // Yellow
                        borderColor = 'rgba(234, 179, 8, 1)';
                        hoverBackgroundColor = 'rgba(202, 138, 4, 1)';
                        break;
                    case 'amenities':
                        labelText = 'Amenity Score (out of 5)';
                        backgroundColor = 'rgba(239, 68, 68, 0.6)'; // Red
                        borderColor = 'rgba(239, 68, 68, 1)';
                        hoverBackgroundColor = 'rgba(220, 38, 38, 1)';
                        break;
                    default:
                        labelText = 'Overall Score (out of 5)';
                }

                if (propertyChart) {
                    propertyChart.destroy();
                }

                propertyChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelText,
                            data: data,
                            backgroundColor: backgroundColor,
                            borderColor: borderColor,
                            borderWidth: 1,
                            hoverBackgroundColor: hoverBackgroundColor,
                            borderRadius: 4,
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        maintainAspectRatio: false,
                        responsive: true,
                        scales: {
                            x: {
                                beginAtZero: metric !== 'value',
                                grid: {
                                    drawOnChartArea: false
                                }
                            },
                             y: {
                                grid: {
                                    display: false
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.x !== null) {
                                            if(metric === 'value') {
                                               label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0 }).format(context.parsed.x);
                                            } else {
                                               label += context.parsed.x;
                                            }
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        onClick: (event, elements) => {
                            if (elements.length > 0) {
                                const chartElement = elements[0];
                                const propertyName = propertyChart.data.labels[chartElement.index];
                                const property = propertyData.find(p => p.name === propertyName);
                                if (property) {
                                    document.getElementById(property.id).scrollIntoView({ behavior: 'smooth' });
                                }
                            }
                        }
                    }
                });
            };

            const populateProfiles = () => {
                const container = document.getElementById('property-profiles-container');
                propertyData.forEach(p => {
                    const amenityIcons = {
                        'pool': 'ðŸŠ', 'fitness': 'ðŸ’ª', 'game': 'ðŸŽ®', 'co-working': 'ðŸ’¼', 'rooftop': 'ðŸŒ‡', 'concierge': 'ðŸ›Žï¸', 'yoga': 'ðŸ§˜', 'golf': 'â›³', 'library': 'ðŸ“š', 'movie': 'ðŸŽ¬', 'bocce': 'ðŸŽ³', 'pizza': 'ðŸ•', 'sound': 'ðŸŽ§', 'bike': 'ðŸš²', 'club': 'ðŸ¥‚', 'plaza': 'ðŸŒ³'
                    };
                    const getIcon = (amenity) => {
                        const lowerAmenity = amenity.toLowerCase();
                        for (const key in amenityIcons) {
                            if (lowerAmenity.includes(key)) return amenityIcons[key];
                        }
                        return 'â­';
                    };

                    const profileHTML = `
                        <article id="${p.id}" class="bg-white p-6 rounded-xl shadow-md border border-gray-100 scroll-mt-24">
                           <h3 class="text-2xl font-bold text-teal-700 mb-4">${p.name}</h3>

                           <div class="mb-6">
                                <h4 class="text-xl font-semibold border-b pb-2 mb-2">Overview</h4>
                                <p class="text-gray-700 text-sm">${p.overview}</p>
                           </div>

                           <div class="md:grid md:grid-cols-2 gap-8 mb-6">
                                <div>
                                    <h4 class="text-xl font-semibold border-b pb-2 mb-2">Studio Floor Plans & Pricing</h4>
                                    <p class="text-gray-700 text-sm"><strong>Price Range:</strong> ${p.floorPlansPricing.range}</p>
                                    <p class="text-gray-700 text-sm"><strong>Size:</strong> ${p.floorPlansPricing.sqFt}</p>
                                    <p class="text-gray-700 text-sm"><strong>Special:</strong> <span class="text-amber-600 font-medium">${p.floorPlansPricing.special}</span></p>
                                    <p class="text-gray-700 text-sm"><strong>Availability:</strong> ${p.floorPlansPricing.availability}</p>
                                </div>
                                <div>
                                    <h4 class="text-xl font-semibold border-b pb-2 mb-2">Amenities Spotlight</h4>
                                    <div class="flex flex-wrap gap-3 text-sm">
                                        ${p.amenities.map(a => `<span class="flex items-center bg-teal-50 text-teal-800 px-2 py-1 rounded-full">${getIcon(a)}<span class="ml-1.5">${a}</span></span>`).join('')}
                                    </div>
                                </div>
                           </div>

                           <div class="mb-6">
                                <h4 class="text-xl font-semibold border-b pb-2 mb-2">Resident Experience</h4>
                                <div class="grid md:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <strong class="text-green-600">Pros:</strong>
                                        <ul class="list-disc list-inside mt-1 space-y-1">
                                            ${p.pros.map(pro => `<li>${pro}</li>`).join('')}
                                        </ul>
                                    </div>
                                    <div>
                                        <strong class="text-red-600">Cons:</strong>
                                        <ul class="list-disc list-inside mt-1 space-y-1">
                                            ${p.cons.map(con => `<li>${con}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                           </div>

                           <div>
                                <h4 class="text-xl font-semibold border-b pb-2 mb-2">Overall Living</h4>
                                <p class="text-gray-700 text-sm">${p.overallLiving}</p>
                           </div>
                        </article>
                    `;
                    container.innerHTML += profileHTML;
                });
            };

            const populateComparativeTables = () => {
                const comparisonTableBody = document.getElementById('comparison-table-body');
                comparativeTablesData.studioComparison.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900">${row.propertyName}</td>
                        <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-700">${row.priceRange}</td>
                        <td class="px-3 py-2 whitespace-normal text-sm text-gray-700">${row.specials}</td>
                        <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-700">${row.poolType}</td>
                        <td class="px-3 py-2 whitespace-normal text-sm text-gray-700">${row.commonSpaces}</td>
                        <td class="px-3 py-2 whitespace-normal text-sm text-gray-700">${row.outdoorSpaces}</td>
                        <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-700">${row.availability}</td>
                    `;
                    comparisonTableBody.appendChild(tr);
                });

                const residentExperienceTableBody = document.getElementById('resident-experience-table-body');
                comparativeTablesData.residentExperience.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900">${row.propertyName}</td>
                        <td class="px-3 py-2 whitespace-normal text-sm text-gray-700">${row.management}</td>
                        <td class="px-3 py-2 whitespace-normal text-sm text-gray-700">${row.noise}</td>
                        <td class="px-3 py-2 whitespace-normal text-sm text-gray-700">${row.overallLiving}</td>
                        <td class="px-3 py-2 whitespace-normal text-sm text-gray-700">${row.petIssues}</td>
                    `;
                    residentExperienceTableBody.appendChild(tr);
                });
            };

            const populateRecommendations = () => {
                const tailoredContainer = document.getElementById('tailored-recommendations');
                const diligenceContainer = document.getElementById('due-diligence');

                recommendationsData.tailored.forEach(rec => {
                    tailoredContainer.innerHTML += `
                        <div>
                            <h4 class="font-semibold text-teal-700">${rec.title}</h4>
                            <p class="text-sm text-gray-600">${rec.text}</p>
                        </div>
                    `;
                });

                recommendationsData.diligence.forEach(rec => {
                    diligenceContainer.innerHTML += `
                        <div>
                            <h4 class="font-semibold text-teal-700">${rec.title}</h4>
                            <p class="text-sm text-gray-600">${rec.text}</p>
                        </div>
                    `;
                });
            };

            const setupNavObserver = () => {
                const sections = document.querySelectorAll('section');
                const navLinks = document.querySelectorAll('.nav-link');

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            navLinks.forEach(link => {
                                link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                            });
                        }
                    });
                }, { rootMargin: "-50% 0px -50% 0px", threshold: 0 });

                sections.forEach(section => observer.observe(section));
            };

            document.getElementById('priority-filter').addEventListener('change', (e) => {
                updateChart(e.target.value);
            });

            updateChart('overall');
            populateProfiles();
            populateComparativeTables();
            populateRecommendations();
            setupNavObserver();
        });
    </script>
</body>
</html>
